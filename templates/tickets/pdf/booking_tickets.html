{% load i18n %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
    {% for item in tickets_data %}
    <div class="ticket-card {% if not forloop.first %}page-break{% endif %}">
        <div class="ticket-header">
            <div class="event-info">
                {% if org_logo_base64 %}
                <img src="data:image/png;base64,{{ org_logo_base64 }}" alt="{{ organization.name }}" class="org-logo">
                {% endif %}
                <h2>{{ event.title }}</h2>
                <p>{{ organization.name }}</p>
            </div>
            <span class="ticket-type-badge">{{ item.ticket.ticket_type.name }}</span>
        </div>

        <div class="ticket-body">
            <div class="ticket-details">
                <div class="detail-grid">
                    <div class="detail-item">
                        <label>{% trans "Date" %}</label>
                        <span>{{ event.start_at|date:"F d, Y" }}</span>
                    </div>
                    <div class="detail-item">
                        <label>{% trans "Time" %}</label>
                        <span>{{ event.start_at|date:"g:i A" }}</span>
                    </div>
                    <div class="detail-item">
                        <label>{% trans "Location" %}</label>
                        <span>{{ event.location }}</span>
                    </div>
                    {% if item.ticket.attendee_name %}
                    <div class="detail-item">
                        <label>{% trans "Attendee" %}</label>
                        <span>{{ item.ticket.attendee_name }}</span>
                    </div>
                    {% endif %}
                    <div class="detail-item">
                        <label>{% trans "Ticket #" %}</label>
                        <span>{{ forloop.counter }} {% trans "of" %} {{ tickets_data|length }}</span>
                    </div>
                    <div class="detail-item">
                        <label>{% trans "Booking Ref" %}</label>
                        <span>{{ booking.reference|slice:":8"|upper }}</span>
                    </div>
                </div>
            </div>

            <div class="qr-section">
                <div class="qr-code">
                    <img src="data:image/png;base64,{{ item.qr_code_data }}" alt="{% trans "QR Code" %}">
                </div>
                <p class="ticket-code">{{ item.ticket.code }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</body>
</html>
