{% load static %}
<div id="page-loader" class="fixed inset-0 z-[9999] flex items-center justify-center bg-background transition-opacity duration-300" hx-preserve="true">
    <div class="flex flex-col items-center gap-6">
        <div class="relative flex items-center justify-center">
            <div class="absolute inset-0 h-24 w-24 animate-spin rounded-full border-4 border-primary border-t-transparent"></div>
            <div class="h-16 w-16 flex items-center justify-center z-10">
                <img src="{% static 'images/logo/logo_light_mode.png' %}"
                     alt="Reckot"
                     class="h-12 w-auto dark:hidden"
                     loading="eager">
                <img src="{% static 'images/logo/logo_dark_mode.png' %}"
                     alt="Reckot"
                     class="h-12 w-auto hidden dark:block"
                     loading="eager">
            </div>
        </div>
        <p class="text-sm text-muted-foreground animate-pulse">Loading...</p>
    </div>
</div>

<script>
(function() {
    const loader = document.getElementById('page-loader');
    if (!loader) return;

    function hideLoader() {
        loader.style.opacity = '0';
        setTimeout(() => {
            loader.style.display = 'none';
        }, 300);
    }

    if (document.readyState === 'complete') {
        hideLoader();
    } else {
        window.addEventListener('load', () => {
            setTimeout(hideLoader, 300);
        });
    }
})();
</script>
