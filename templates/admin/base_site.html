{% extends "admin/base.html" %}
{% load static %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrahead %}
{{ block.super }}
<script>
    (function() {
        var mode = localStorage.getItem('theme') || 'system';
        var isDark = mode === 'dark' || (mode === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);
        if (isDark) document.documentElement.classList.add('dark');
    })();
</script>
<script type="module">
    import { Application } from "https://unpkg.com/@hotwired/stimulus@3.2.2/dist/stimulus.js"
    window.Stimulus = Application.start()
</script>
<script src="{% static 'js/stimulus-app.js' %}?v={{ CACHE_VERSION }}"></script>
<script defer src="https://unpkg.com/lucide@0.469.0/dist/umd/lucide.min.js" onload="lucide.createIcons()"></script>
<script defer src="{% static 'js/admin-loader.js' %}"></script>
{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}" class="flex items-center gap-2" data-controller="logo">
        <img src="{% static 'images/logo/reckto_logo_light_mode.png' %}"
             alt="Reckot"
             class="h-8 w-auto"
             data-logo-target="dark">
        <img src="{% static 'images/logo/reckto_logo_dark_mode.png' %}"
             alt="Reckot"
             class="h-8 w-auto"
             data-logo-target="light"
             style="display: none;">
    </a>
</h1>
{% endblock %}

{% block nav-global %}
<div class="flex items-center gap-2">
    <button data-action="click->theme#toggleMode" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Toggle theme">
        <i data-lucide="moon" class="h-5 w-5 dark:hidden"></i>
        <i data-lucide="sun" class="h-5 w-5 hidden dark:block"></i>
    </button>
</div>
{% endblock %}

{% block footer %}
{{ block.super }}
{% include "partials/floating_chatbot.html" %}
{% endblock %}
