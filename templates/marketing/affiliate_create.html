{% extends "layouts/dashboard.html" %}
{% load slippers %}

{% block title %}Create Affiliate Link - {{ organization.name }} - Reckot{% endblock %}

{% block header_title %}
<div class="min-w-0">
    <h1 class="text-lg font-semibold truncate">Create Affiliate Link</h1>
    <p class="text-sm text-muted-foreground hidden md:block">Set up a new tracking link</p>
</div>
{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto">
    <form method="post" class="space-y-6">
        {% csrf_token %}

        <div class="card p-6 space-y-5">
            <h2 class="font-semibold flex items-center gap-2">
                <i data-lucide="link" class="w-4 h-4"></i>
                Link Details
            </h2>

            <div>
                <label for="name" class="block text-sm font-medium mb-2">Link Name</label>
                <input type="text" name="name" id="name" required placeholder="e.g., Partner - John Doe"
                       class="input">
                <p class="text-xs text-muted-foreground mt-1">Internal name to identify this affiliate</p>
            </div>

            <div>
                <label for="event" class="block text-sm font-medium mb-2">Event (optional)</label>
                <select name="event" id="event" class="input">
                    <option value="">All Events</option>
                    {% for event in events %}
                    <option value="{{ event.id }}">{{ event.title }}</option>
                    {% endfor %}
                </select>
                <p class="text-xs text-muted-foreground mt-1">Leave empty to track across all events</p>
            </div>
        </div>

        <div class="card p-6 space-y-5">
            <h2 class="font-semibold flex items-center gap-2">
                <i data-lucide="coins" class="w-4 h-4"></i>
                Commission Settings
            </h2>

            <div>
                <label for="commission_type" class="block text-sm font-medium mb-2">Commission Type</label>
                <select name="commission_type" id="commission_type" class="input">
                    <option value="PERCENTAGE">Percentage</option>
                    <option value="FIXED">Fixed Amount</option>
                </select>
            </div>

            <div>
                <label for="commission_value" class="block text-sm font-medium mb-2">Commission Value</label>
                <input type="number" name="commission_value" id="commission_value" value="0" min="0" step="0.01"
                       class="input">
                <p class="text-xs text-muted-foreground mt-1">Percentage (e.g., 10 for 10%) or fixed amount in XAF</p>
            </div>
        </div>

        <div class="flex items-center gap-4">
            <a href="{% url 'marketing:affiliate_list' org_slug=organization.slug %}">
                {% #button variant="outline" %}
                Cancel
                {% /button %}
            </a>
            {% #button type="submit" variant="default" %}
                <i data-lucide="plus" class="w-4 h-4"></i>
                Create Link
            {% /button %}
        </div>
    </form>
</div>
{% endblock %}
